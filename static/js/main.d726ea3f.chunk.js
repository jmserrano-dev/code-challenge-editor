(this["webpackJsonpeditor-spa"]=this["webpackJsonpeditor-spa"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(32)},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(4),c=n.n(r),i=n(11),l=n(2),u=n(12),s=l.v.model("Box",{id:l.v.identifier,width:200,height:100,color:"#FFF000",left:200,top:100,isSelected:!1}).views((function(e){return{}})).actions((function(e){return{toogleSelection:function(){e.isSelected=!e.isSelected},changeColor:function(t){e.color=t},unselect:function(){e.isSelected=!1},move:function(t,n){e.top=t,e.left=n}}})),d=l.v.model("RootStore",{boxes:l.v.array(s),history:l.v.optional(u.a,{targetPath:"../boxes"})}).views((function(e){return{get countSelection(){return e.boxes.filter((function(e){return e.isSelected})).length}}})).actions((function(e){return{addBox:function(t){e.boxes.push(t)},removeBoxes:function(){e.boxes=e.boxes.filter((function(e){return!e.isSelected}))},unselect:function(){e.boxes.forEach((function(e){e.unselect()}))},changeColor:function(t){e.boxes.forEach((function(e){e.isSelected&&e.changeColor(t)}))}}})).create();Object(i.a)("store",d,{storage:localStorage,jsonify:!0});var f=n(6),g=a.a.createContext(),m=function(e){var t=e.children,n=e.store;return a.a.createElement(g.Provider,{value:n},t)},h=function(){return a.a.useContext(g)},b=(n(22),function(e){return a.a.createElement("div",{"data-testId":"box",id:e.id,className:"box",style:{width:e.width,height:e.height,backgroundColor:e.color},onClick:e.onClick},"Box")}),v=n(3),p=(n(23),["children","onUnSelectAll"]),x=function(e){var t=e.children,n=e.onUnSelectAll,o=Object(v.a)(e,p);return a.a.createElement("div",Object.assign({},o,{className:"canva",onClick:n}),t)},E=n(5),S=n(9),j=n.n(S),y=(n(24),function(e){var t=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!1),a=Object(E.a)(n,2),r=a[0],c=a[1];Object(o.useEffect)((function(){j()(t.current).draggable({inertia:!0,autoScroll:!1,modifiers:[j.a.modifiers.restrictRect({endOnly:!0,restriction:"parent"})],listeners:{start:function(){c(!0)},end:function(t){var n=t.target;setTimeout((function(){return c(!1)}));var o=i(n),a=o.currentTop,r=o.currentLeft;e(a,r)},move:function(e){var t=e.target,n=e.dy,o=e.dx,a=i(t),r=a.currentTop+n,c=a.currentLeft+o;t.style.transform="translate(".concat(c,"px, ").concat(r,"px)"),t.setAttribute("data-top",r),t.setAttribute("data-left",c)}}})}),[e]);var i=function(e){return{currentTop:parseFloat(e.getAttribute("data-top"))||0,currentLeft:parseFloat(e.getAttribute("data-left"))||0}};return{ref:t,isDragging:r}}(e.onMove),n=t.ref,r=t.isDragging;return a.a.createElement("div",{ref:n,"data-top":e.top,"data-left":e.left,className:["draggable",e.isSelected?"draggable--selected":"",r?"draggable--dragging":""].join(" "),style:{width:e.width,height:e.height,transform:"translate(".concat(e.left,"px, ").concat(e.top,"px)")}},e.children({isDragging:r}))}),C=Object(f.a)((function(){var e=function(e){return{boxes:e.boxes,onSelect:function(e,t,n){t||n.toogleSelection(),e.preventDefault(),e.stopPropagation()},onUnSelectAll:function(){return e.unselect()}}}(h()),t=e.boxes,n=e.onSelect,o=e.onUnSelectAll;return a.a.createElement(x,{"data-testid":"canvas",onUnSelectAll:o},t.map((function(e){return a.a.createElement(y,{key:"".concat(e.id).concat(e.color),left:e.left,top:e.top,width:e.width,height:e.height,isSelected:e.isSelected,onMove:function(t,n){return e.move(t,n)}},(function(t){var o=t.isDragging;return a.a.createElement(b,{id:e.id,color:e.color,width:e.width,height:e.height,onClick:function(t){return n(t,o,e)}})}))})))})),w=(n(25),["gap","children"]),O=function(e){var t=e.gap,n=void 0===t?"m":t,o=e.children,r=Object(v.a)(e,w);return a.a.createElement("div",Object.assign({},r,{className:"box-layout ".concat(n)}),o)},k=(n(26),function(e){var t=e.gap,n=void 0===t?"m":t,o=e.children;return a.a.createElement("div",{className:"page-layout ".concat(n)},o)}),B=function(e){var t=e.content;return a.a.createElement("span",null,t)},A=function(e){return a.a.createElement("input",e)},R=["label"],U=function(e){var t=e.label,n=Object(v.a)(e,R);return a.a.createElement("button",n,t)},N=n(13),D=n.n(N),F=n(14),T=function(e){return{actions:{remove:{disabled:0===e.countSelection},undo:{disabled:!e.history.canUndo},redo:{disabled:!e.history.canRedo}},onUndo:function(){return e.history.undo()},onRedo:function(){return e.history.redo()},onAddBox:function(t){var n=function(e){return s.create({id:D()(),color:e,left:50,top:50})}(t);e.addBox(n)},onRemoveBoxes:function(){e.removeBoxes()}}},L=(n(29),["children"]),P=function(e){var t=e.children,n=Object(v.a)(e,L);return a.a.createElement("nav",Object.assign({},n,{className:"toolbar"}),t)},I=function(e){var t=e.justify,n=void 0===t?"start":t,o=e.children;return a.a.createElement("div",{className:"layout__group ".concat(n)},o)},J=Object(f.a)((function(){var e=h(),t=function(e){var t=Object(o.useState)("#15D1C4"),n=Object(E.a)(t,2),a=n[0],r=n[1];return{color:a,onChangeColor:Object(F.a)(500,(function(t){r(t),e.countSelection>0&&e.changeColor(t)}))}}(e),n=t.color,r=t.onChangeColor,c=T(e),i=c.actions,l=c.onUndo,u=c.onRedo,s=c.onAddBox,d=c.onRemoveBoxes;return a.a.createElement(P,{"data-testid":"toolbar"},a.a.createElement(I,null,a.a.createElement(U,{label:"Add Box",onClick:function(){return s(n)}}),a.a.createElement(U,{label:"Remove Box",disabled:i.remove.disabled,onClick:d}),a.a.createElement(A,{type:"color",defaultValue:n,onChange:function(e){return r(e.target.value)}})),a.a.createElement(B,{content:"".concat(e.countSelection," boxes selected")}),a.a.createElement(I,{justify:"end"},a.a.createElement(U,{label:"Undo",disabled:i.undo.disabled,onClick:l}),a.a.createElement(U,{label:"Redo",disabled:i.redo.disabled,onClick:u})))})),M=function(){return a.a.createElement(O,{"data-testid":"editor"},a.a.createElement(k,null,a.a.createElement(J,null),a.a.createElement(C,null)))},W=(n(30),function(){return a.a.createElement("div",{"data-testid":"app",className:"app"},a.a.createElement(m,{store:d},a.a.createElement(M,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(31);c.a.render(a.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.d726ea3f.chunk.js.map